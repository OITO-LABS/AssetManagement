(window.webpackJsonp=window.webpackJsonp||[]).push([[11,13],{UJ58:function(e,t,a){"use strict";a.r(t),a.d(t,"Heading",function(){return i});var l=a("q1tI"),s=a.n(l);a("bBnu");class i extends l.Component{constructor(e){super(e),this.state={}}render(){return s.a.createElement("div",{className:"row heading-row"},s.a.createElement("h4",null,this.props.heading))}}t.default=i},bBnu:function(e,t,a){},dQBp:function(e,t,a){"use strict";a.r(t),a.d(t,"registerEmployee",function(){return p});var l=a("q1tI"),s=a.n(l),i=a("Bbg3"),n=a("ICSB"),r=a("8vYt"),m=a("qcPu"),o=a("UJ58");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){c(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends l.Component{constructor(e){super(e),this.validateFieldData=this.validateFieldData.bind(this),this.validEmailData=this.validEmailData.bind(this),this.validator=new r.default([{field:"firstName",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"First name is empty"},{field:"lastName",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Last name is empty"},{field:"designation",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Designation is empty"},{field:"email",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Email is empty"},{field:"email",method:this.validEmailData,args:[{ignore_whitespace:!0}],validWhen:!0,message:"Invalid format"},{field:"image",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Profile image is empty"},{field:"dob",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Date of birth is empty"},{field:"contactNo",method:this.validateFieldData,args:[{propName:"phone"}],validWhen:!0,message:"Contact number is empty"},{field:"contactNo",method:this.validateFieldData,args:[{propName:"valid"}],validWhen:!0,message:"Invalid contact number"},{field:"emergencyContactName",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Emergency contact name is empty"},{field:"emergencyContact",method:this.validateFieldData,args:[{propName:"phone"}],validWhen:!0,message:"Emergency contact number is empty"},{field:"emergencyContact",method:this.validateFieldData,args:[{propName:"valid"}],validWhen:!0,message:"Invalid emergency contact number"},{field:"healthCardNo",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Health card number is empty"},{field:"empNo",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Employee number is empty"},{field:"bloodGroup",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Select blood group"}]),this.state=h({},this.getStateData(this.props),{validation:this.validator.valid()}),this.handleInputChange=this.handleInputChange.bind(this),this.submit=this.submit.bind(this),this.update=this.update.bind(this),this.cancel=this.cancel.bind(this),this.fieldData={}}componentDidMount(){app.events.trigger(i.o,{status:!1,reset:!0}),-1!=this.props.match.params.empId&&m.a.getRequest("getEmpDetails",{empId:this.props.match.params.empId}).then(e=>{this.setState(h({},this.getStateData(e)))}).catch(e=>{console.error(e)})}getStateData(e){return{firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",designation:e.designation||"",dob:e.dob||"",contactNo:e.contactNo||"",emergencyContactName:e.emergencyContactName||"",emergencyContact:e.emergencyContact||"",healthCardNo:e.healthCardNo||"",empNo:e.empNo||"",bloodGroup:e.bloodGroup||""}}validEmailData(e,t,a,l,s){return RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i).test(e)}validateFieldData(e,t,a,l,s){return this.fieldData[s]&&!!this.fieldData[s][t.propName]}handleInputChange(e,t={}){let a=t.field||e.target.name,l=t.value||e.target.value||"";this.fieldData[a]=t,e&&this.setState({[a]:"checkbox"==e.target.type?e.target.checked:l})}submit(){const e=this.validator.validate(this.state);this.setState({validation:e}),this.submitted=!0,e.isValid&&m.a.formDataRequest("registered",h({},this.getStateData(this.state))).then(e=>{"success"==e.status?(app.events.trigger(i.I,{visible:!0,type:i.b.SUCESS,msg:"Successfully Submitted"}),setTimeout(()=>{app.events.trigger(i.q,{routerKey:i.m})},3e3)):app.events.trigger(i.I,{visible:!0,type:i.b.DANGER,msg:`${e.message}`})}).catch(e=>{console.log(e)})}update(){const e=this.validator.validate(this.state);this.setState({validation:e}),this.submitted=!0,e.isValid&&m.a.putRequest("updateEmployee",h({empId:this.props.match.params.empId},this.getStateData(this.state))).then(e=>{"success"==e.status?(app.events.trigger(i.I,{visible:!0,type:i.b.SUCESS,msg:"Successfully updated"}),setTimeout(()=>{app.events.trigger(i.q,{routerKey:i.m})},3e3)):app.events.trigger(i.I,{visible:!0,type:i.b.DANGER,msg:`${e.message}`})}).catch(e=>{console.log(e)})}cancel(){app.events.trigger(i.q,{routerKey:i.m})}render(){let e=this.submitted?this.validator.validate(this.state):this.state.validation;var t=this.props.match.params.empId;return s.a.createElement("div",{className:"form-wrapper"},-1==t?s.a.createElement(o.default,{heading:"REGISTER EMPLOYEE"}):s.a.createElement(o.default,{heading:"UPDATE EMPLOYEE"}),s.a.createElement("div",{className:"d-flex justify-content-sm-around"},s.a.createElement("div",{className:"p-2 w-25 mt-5"},s.a.createElement(n.default,{label:"First Name",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,name:"firstName",onChange:this.handleInputChange,value:this.state.firstName,placeholder:"First Name",validator:e}),s.a.createElement(n.default,{label:"Last Name",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"lastName",value:this.state.lastName,placeholder:"Last Name",validator:e}),s.a.createElement(n.default,{label:"Email",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"email",value:this.state.email,placeholder:"Email",validator:e}),s.a.createElement(n.default,{label:"Designation",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"designation",value:this.state.designation,placeholder:"Designation",validator:e}),s.a.createElement(n.default,{label:"DOB",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"dob",type:-1==t?"date":"",value:this.state.dob,placeholder:"DOB",validator:e}),s.a.createElement(n.default,{label:"Upload Profile Pic",labelClassName:"txt-label",fieldClassName:"txt-input",type:"file",mandatory:!0,onChange:this.handleInputChange,name:"image",value:this.state.image,validator:e})),s.a.createElement("div",{className:"p-2 w-25 mt-5"},s.a.createElement(n.default,{label:"Contact Number",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"contactNo",value:this.state.contactNo,placeholder:"Contact Number",type:"phone",minLength:"8",maxLength:"10",validator:e}),s.a.createElement(n.default,{label:"Emergency Contact Name",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"emergencyContactName",value:this.state.emergencyContactName,placeholder:"Emergency Contact Name",validator:e}),s.a.createElement(n.default,{label:"Emergency Contact Number",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"emergencyContact",value:this.state.emergencyContact,placeholder:"Emergency Contact Number",type:"phone",minLength:"8",maxLength:"10",validator:e}),s.a.createElement(n.default,{label:"Healthcard Number",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"healthCardNo",value:this.state.healthCardNo,placeholder:"Healthcard Number",validator:e}),s.a.createElement(n.default,{label:"Employee Number",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,disabled:"-1"!=t,onChange:this.handleInputChange,name:"empNo",value:this.state.empNo,placeholder:"Employee Number",validator:e}),s.a.createElement(n.default,{type:"select",label:"Blood Group",labelClassName:"txt-label",fieldClassName:"select-input",mandatory:!0,name:"bloodGroup",nameAlias:"abc_fullName",onChange:this.handleInputChange,options:[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B",label:"B+"},{value:"B-",label:"B-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"}],value:this.state.bloodGroup,placeholder:"Blood Group",validator:e}))),s.a.createElement("div",{className:"btn-wrapper"},"-1"==t?s.a.createElement("button",{type:"button",className:"btn submit-btn",onClick:this.submit},"Submit"):s.a.createElement("button",{type:"button",className:"btn submit-btn",onClick:this.update},"Update"),s.a.createElement("button",{type:"button",className:"btn cancel-btn",onClick:this.cancel},"Cancel")))}}t.default=p}}]);