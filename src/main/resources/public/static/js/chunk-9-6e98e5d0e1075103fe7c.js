(window.webpackJsonp=window.webpackJsonp||[]).push([[9,13],{UJ58:function(e,t,a){"use strict";a.r(t),a.d(t,"Heading",function(){return i});var s=a("q1tI"),n=a.n(s);a("bBnu");class i extends s.Component{constructor(e){super(e),this.state={}}render(){return n.a.createElement("div",{className:"row heading-row"},n.a.createElement("h4",null,this.props.heading))}}t.default=i},bBnu:function(e,t,a){},"d/IS":function(e,t,a){"use strict";a.r(t);var s=a("q1tI"),n=a.n(s),i=a("Bbg3"),r=a("ICSB"),l=a("qcPu"),u=a("UJ58"),p=a("8vYt");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach(function(t){c(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=class extends s.Component{constructor(e){super(e),this.validateFieldData=this.validateFieldData.bind(this),this.validator=new p.default("Unassigned"==this.props.match.params.status?[{field:"empNo",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Select employee number"},{field:"issueDate",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Issue date is empty"}]:[{field:"returnDate",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Return date is empty"},{field:"cause",method:"isEmpty",args:[{ignore_whitespace:!0}],validWhen:!1,message:"Cause is empty"}]),this.state=d({},this.getStateData(this.props),{validation:this.validator.valid(),empData:[]}),this.handleInputChange=this.handleInputChange.bind(this),this.cancel=this.cancel.bind(this),this.assign=this.assign.bind(this),this.unassign=this.unassign.bind(this),this.getOptions=this.getOptions.bind(this),this.fieldData={}}componentDidMount(){app.events.trigger(i.o,{status:!1,reset:!0}),l.a.getRequest("getEmpData").then(e=>{this.setState(d({},this.getStateData(e),{empData:e}))}).catch(e=>{console.error(e)})}getStateData(e){return{empNo:e.empNo||"",issueDate:e.issueDate||"",returnDate:e.returnDate||"",cause:e.cause||""}}getOptions(){let e=[];return e=this.state.empData.map(e=>({value:e.empNo,label:e.firstName}))}validateFieldData(e,t,a,s,n){return this.fieldData[n]&&!!this.fieldData[n][t.propName]}assign(){const e=this.validator.validate(this.state);this.setState({validation:e}),this.submitted=!0;var t={empNo:this.fieldData.empNo},a=this.state.issueDate;e.isValid&&l.a.postRequest("assetassignment",{employee:t,issueDate:a,updatedId:"1",assetId:this.props.assetId}).then(e=>{"success"==e.status?(app.events.trigger(i.I,{visible:!0,type:i.b.SUCESS,msg:"Successfully Assigned"}),setTimeout(()=>{app.events.trigger(i.q,{routerKey:i.f})},3e3)):app.events.trigger(i.I,{visible:!0,type:i.b.DANGER,msg:`${e.message}`})}).catch(e=>{console.log(e)})}unassign(){const e=this.validator.validate(this.state);this.setState({validation:e}),this.submitted=!0;var t=this.state.returnDate,a=this.state.cause;e.isValid&&l.a.putRequest("assetassignment",{returnDate:t,cause:a,updatedId:"1",assetId:this.props.match.params.assetId}).then(e=>{"success"==e.status?(app.events.trigger(i.I,{visible:!0,type:i.b.SUCESS,msg:"Assets Unassigned Successfully"}),setTimeout(()=>{app.events.trigger(i.q,{routerKey:i.f})},3e3)):app.events.trigger(i.I,{visible:!0,type:i.b.DANGER,msg:`${e.message}`})}).catch(e=>{app.events.trigger(i.I,{visible:!0,type:i.b.DANGER,msg:"Failed To Unassign"})})}cancel(){app.events.trigger(i.q,{routerKey:i.f})}handleInputChange(e,t={}){let a=t.field||e.target.name,s=t.value||e.target.value||"";this.fieldData[a]=s,e&&this.setState({[a]:"checkbox"==e.target.type?e.target.checked:s})}render(){let e=this.submitted?this.validator.validate(this.state):this.state.validation;var t=this.props.match.params.status;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-wrapper"},"Unassigned"==t?n.a.createElement(u.default,{heading:"ASSIGN ASSET"}):n.a.createElement(u.default,{heading:"UNASSIGN ASSET"}),this.state.empData&&"Unassigned"==t?n.a.createElement("div",{className:"d-flex justify-content-sm-around"},n.a.createElement("div",{className:"p-2 w-25 mt-5"},n.a.createElement(r.default,{type:"select",searchable:!0,label:"Employee Name",labelClassName:"txt-label",fieldClassName:"select-input",mandatory:!0,name:"empNo",nameAlias:"empNo",onChange:this.handleInputChange,options:this.getOptions(),value:this.state.empNo,placeholder:"Employee Number",validator:e}),n.a.createElement(r.default,{label:"Issue Date",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"issueDate",type:"date",value:this.state.issueDate,placeholder:"Issue Date",validator:e}))):this.state.empData&&"Assigned"==t&&n.a.createElement("div",{className:"d-flex justify-content-sm-around"},n.a.createElement("div",{className:"p-2 w-25 mt-5"},n.a.createElement(r.default,{label:"Return Date",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,onChange:this.handleInputChange,name:"returnDate",type:"date",value:this.state.returnDate,placeholder:"Return Date",validator:e}),n.a.createElement(r.default,{type:"textarea",label:"Cause",labelClassName:"txt-label",fieldClassName:"txt-input",mandatory:!0,name:"cause",onChange:this.handleInputChange,value:this.state.cause,placeholder:"Cause",validator:e}))),n.a.createElement("div",{className:"btn-wrapper"},n.a.createElement("div",{className:"btn-wrapper"},"Unassigned"==t?n.a.createElement("button",{type:"button",className:"btn submit-btn",onClick:this.assign},"Assign"):n.a.createElement("button",{type:"button",className:"btn submit-btn",onClick:this.unassign},"Unassign"),n.a.createElement("button",{type:"button",className:"btn cancel-btn",onClick:this.cancel},"Cancel")))))}}}}]);